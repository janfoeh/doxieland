#!/usr/bin/env ruby

require "doxieland"
require "thor"
require "ruby-progressbar"

class CLI < Thor
  include Thor::Actions

  class_option 'scanner-ip', desc:'your scanners network address', banner: 'xxx.xxx.xxx.xxx', type: :string, aliases: '-i'

  desc "list", "list all scans saved in your scanners memory"

  def list
    Doxieland::Api.url "http://#{options[:ip]}:8080"
    api = Doxieland::Api.new

    api.list_scans.result.each do |scan|
      puts scan[:name]
    end
  end
end

CLI.start( ARGV.any? ? ARGV : ['help'] )